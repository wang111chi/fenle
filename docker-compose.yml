version: '2'
services:
  api:
    build:
      context: .
      dockerfile: api/Dockerfile
    volumes:
     - .:/fenle
    ports:
     - "3032:3031"
    depends_on:
     - mysql
     - redis
  callback_url:
    build:
      context: .
      dockerfile: callback_url/Dockerfile
    volumes:
     - .:/fenle
    ports:
     - "3033:3031"
    depends_on:
     - mysql
  wx_prog:
    build:
      context: .
      dockerfile: wx_prog/Dockerfile
    volumes:
     - .:/fenle
    ports:
     - "3034:3031"
    depends_on:
     - mysql
     - redis
  mysql:
    extends:
      file: mysql/docker-compose.yml
      service: mysql
  redis:
    image: redis
